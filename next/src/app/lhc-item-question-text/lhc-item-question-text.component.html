<ng-container *ngIf="item">
  <!-- label -->
  <div class="lhc-de-label" (focus)="lhcDataService.setActiveRow(item)">
    <span *ngIf="item._questionRepeatable && !item._horizontalTableHeader" class="lf-sn">{{lhcDataService.getRepeatingSN(item) }}</span>
    <span class="lf-question">
      <label id="label-{{ item._elementId }}" for="{{item._elementId}}">
        <!-- prefix -->
        <span *ngIf="item.prefix" class="prefix" [style]="item._obj_prefixCSS">{{item.prefix}}</span>
        <!-- question text -->
        <span class="question" [style]="item._obj_textCSS">{{item.question}}
          <!-- required -->
          <span *ngIf="item._answerRequired" class="lhc-required" title="Required">*</span>
        </span>
      </label>
    </span>
    <!-- question code -->
    <span class="lf-item-code" *ngIf="lhcDataService.getLhcFormData().templateOptions.showQuestionCode">
      <a *ngIf="item._linkToDef" href="{{ item._linkToDef }}" target="_blank" rel="noopener noreferrer">[{{ item.questionCode }}]</a>
      <span *ngIf="!item._linkToDef">[{{ item.questionCode }}]</span>
    </span>
    <!-- coding instructions / helps -->
    <span [ngSwitch]="lhcDataService.getCodingInstructionsDisplayType(item)" *ngIf="item.codingInstructions">
      <span *ngSwitchCase="'inline-escaped'" 
            id="help-{{ item._elementId }}"
            class="lf-prompt" 
            aria-label="Help for question {{item.question}}"
            aria-describedby="label-{{ item._elementId }}"
       >{{item.codingInstructions}}</span>
      <span *ngSwitchCase="'inline-html'" 
            id="help-{{ item._elementId }}"
            class="lf-prompt" 
            [innerHTML]="item.codingInstructions | safeHtml"
            aria-label="Help for question {{item.question}}"
            aria-describedby="label-{{ item._elementId }}"
       ></span>
      <button *ngSwitchCase="'popover-escaped'" id="helpButton-{{ item._elementId }}" type="button" class="lhc-help-button"  
              nz-popover
              [nzPopoverContent]="helpStrTemplate"
              nzPopoverTrigger="click" 
              nzPopoverPlacement="right"  
              nzPopoverTitle="Instruction"
              nzPopoverOverlayClassName="help-class{{ item._elementId.replaceAll('/','-') }}"
              aria-label="Help button for question {{item.question}}"
              aria-describedby="help-button-{{ item._elementId }}">              
        <i nz-icon nzType="question-circle" nzTheme="fill"></i>
      </button>
      <button *ngSwitchCase="'popover-html'" id="helpButton-{{ item._elementId }}" type="button" class="lhc-help-button"  
              nz-popover
              [nzPopoverContent]="helpHtmlTemplate"
              nzPopoverTrigger="click" 
              nzPopoverPlacement="right"  
              nzPopoverTitle="Instruction"
              nzPopoverOverlayClassName="help-class{{ item._elementId.replaceAll('/','-') }}"
              aria-label="Help button for question {{item.question}}"
              aria-describedby="help-button-{{ item._elementId }}">
        <i nz-icon nzType="question-circle" nzTheme="fill"></i>
      </button>
    </span>
    <!-- copyright -->
    <button *ngIf="item.copyrightNotice" id="copyright-{{item._elementId}}" type="button" class="lhc-copyright-button" 
            nz-popover            
            [nzPopoverContent]="copyrightStrTemplate"
            nzPopoverTrigger="click"
            nzPopoverPlacement="right"
            nzPopoverTitle="Copyright"
            nzPopoverOverlayClassName="copyright-class{{ item._elementId.replaceAll('/','-') }}"
            aria-label="Copyright button for question {{item.question}}" 
            aria-describedby="copyright-button-{{ item._elementId }}">
      <i nz-icon nzType="copyright-circle" nzTheme="fill"></i>
    </button>
  </div>

  <!-- help popover template with trusted html -->
  <ng-template #helpHtmlTemplate>
    <span aria-label="Help for question {{item.question}}"
          aria-describedby="help-{{item._elementId}}"
          [innerHTML]="item.codingInstructions | safeHtml"></span>
  </ng-template>

  <!-- help popover template -->
  <ng-template #helpStrTemplate>
    <span aria-label="Help for question {{item.question}}"
          aria-describedby="help-{{item._elementId}}"
    >{{item.codingInstructions}}</span>
  </ng-template>

  <!-- copyright popover template -->
  <ng-template #copyrightStrTemplate>
    <span aria-label="Copyright notice for question {{item.question}}"
          aria-describedby="copyright-{{item._elementId}}"
    >{{item.copyrightNotice}}</span>
  </ng-template>
  
</ng-container>
